"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[897],{4897:(e,n,r)=>{r.r(n),r.d(n,{default:()=>_});var t=r(5861),a=r(4687),s=r.n(a),i=r(1413),c=r(7294);const u={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136V232h752v560zM610.3 476h123.4c1.3 0 2.3-3.6 2.3-8v-48c0-4.4-1-8-2.3-8H610.3c-1.3 0-2.3 3.6-2.3 8v48c0 4.4 1 8 2.3 8zm4.8 144h185.7c3.9 0 7.1-3.6 7.1-8v-48c0-4.4-3.2-8-7.1-8H615.1c-3.9 0-7.1 3.6-7.1 8v48c0 4.4 3.2 8 7.1 8zM224 673h43.9c4.2 0 7.6-3.3 7.9-7.5 3.8-50.5 46-90.5 97.2-90.5s93.4 40 97.2 90.5c.3 4.2 3.7 7.5 7.9 7.5H522a8 8 0 008-8.4c-2.8-53.3-32-99.7-74.6-126.1a111.8 111.8 0 0029.1-75.5c0-61.9-49.9-112-111.4-112s-111.4 50.1-111.4 112c0 29.1 11 55.5 29.1 75.5a158.09 158.09 0 00-74.6 126.1c-.4 4.6 3.2 8.4 7.8 8.4zm149-262c28.5 0 51.7 23.3 51.7 52s-23.2 52-51.7 52-51.7-23.3-51.7-52 23.2-52 51.7-52z"}}]},name:"idcard",theme:"outlined"};var o=r(76),l=function(e,n){return c.createElement(o.Z,(0,i.Z)((0,i.Z)({},e),{},{ref:n,icon:u}))};l.displayName="IdcardOutlined";const d=c.forwardRef(l);var h=r(9418),p=r(9650),f=r(7004),m=r(1230);const v=r(1584).Z;var g=r(7320),x=r(5019),Z=r(5460),w=r(1577),j=r(2666),y=r(9439),b=r(967),k=(0,b.K)((function(e){var n;return null===(n=e.auth)||void 0===n?void 0:n.username})),C=(0,y.Z)(k,2),z=C[0],N=C[1],S=(0,b.K)((function(e){var n;return null===(n=e.auth)||void 0===n?void 0:n.password})),U=(0,y.Z)(S,2),H=U[0],I=U[1],K=(0,b.K)((function(e){var n;return null===(n=e.auth)||void 0===n?void 0:n.isLoading})),L=(0,y.Z)(K,2),T=L[0],P=(L[1],(0,b.K)((function(e){var n,r;return null!==(n=null===(r=e.auth)||void 0===r?void 0:r.error)&&void 0!==n?n:""}))),A=(0,y.Z)(P,2),B=(A[0],A[1],r(4268)),M=r(628).p.injectEndpoints({endpoints:function(e){return{authByUsername:e.mutation({query:function(e){return{url:"/users/login",method:"POST",body:e}}}),register:e.mutation({query:function(e){return{url:"/users/register",method:"POST",body:e}}})}}}),V=M.endpoints.authByUsername.initiate,q=M.endpoints.register.initiate,E=r(4206),O=r(678),R=(0,B.hg)("auth/authByUsername",function(){var e=(0,t.Z)(s().mark((function e(n,r){var t,a,i,c,u,o,l,d,h;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.type,a=r.dispatch,i=r.rejectWithValue,c=r.getState,u=N(c()),o=I(c()),u&&o){e.next=6;break}throw i("error");case 6:return e.prev=6,e.next=9,a("login"===t?V({username:u,password:o}):q({username:u,password:o})).unwrap();case 9:if(l=e.sent){e.next=12;break}throw new Error;case 12:return d=l.user,h=l.accessToken,a(E.hI.setAuthData(d)),a(E.hI.setInited(!0)),localStorage.setItem(O.u,h),e.abrupt("return",l);case 19:return e.prev=19,e.t0=e.catch(6),console.log(e.t0),e.abrupt("return",i("error"));case 23:case"end":return e.stop()}}),e,null,[[6,19]])})));return function(n,r){return e.apply(this,arguments)}}()),W=(0,B.oM)({name:"auth",initialState:{username:"",password:"",isLoading:!1,error:""},reducers:{setUsername:function(e,n){e.username=n.payload},setPassword:function(e,n){e.password=n.payload}},extraReducers:function(e){e.addCase(R.pending,(function(e){e.isLoading=!0})).addCase(R.fulfilled,(function(e){e.isLoading=!1})).addCase(R.rejected,(function(e,n){e.isLoading=!1,e.error=n.payload}))}}),D=W.actions,F=W.reducer;const G={input:"Ti3HluS6",btn:"Lu3fKxCT",heading:"gV3ysCU9",icon:"zkUIbj39",title:"klmsz29K"};var J=r(3007),Q=r(1233),X=r(5401),Y=r(5893),$={auth:F};const _=(0,c.memo)((function(e){var n=e.className,r=e.onSuccess,a=e.type,i=(0,X.T)(),u=z(),o=H(),l=T(),y=(0,c.useCallback)((function(e){i(D.setUsername(e.target.value))}),[i]),b=(0,c.useCallback)((function(e){i(D.setPassword(e.target.value))}),[i]),k=(0,c.useCallback)((0,t.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(R({type:a}));case 2:"fulfilled"===e.sent.meta.requestStatus&&(null==r||r());case 4:case"end":return e.stop()}}),e)}))),[i,r,a]);return(0,Y.jsxs)(Q.W,{reducers:$,removeAfterUnmount:!0,children:[(0,Y.jsx)(h.Z,{className:G.heading,bordered:!1,children:(0,Y.jsxs)(p.Z,{size:16,align:"center",className:G.wrapper,children:[(0,Y.jsx)(d,{className:G.icon}),(0,Y.jsx)(j.Z,{level:3,className:G.title,children:"login"===a?"Авторизация":"Регистрация"})]})}),(0,Y.jsx)(h.Z,{bordered:!1,children:(0,Y.jsxs)(f.Z,{className:(0,J.A)(G.AuthForm,{},[n]),children:[(0,Y.jsxs)(m.Z,{gutter:[1,15],children:[(0,Y.jsxs)(v,{span:24,children:[(0,Y.jsx)(g.Z,{children:"Пользователь"}),(0,Y.jsx)(x.Z,{disabled:l,value:u,onChange:y,size:"large",placeholder:"Введите имя пользователя...",type:"text"})]}),(0,Y.jsxs)(v,{span:24,children:[(0,Y.jsx)(g.Z,{children:"Пароль"}),(0,Y.jsx)(x.Z,{disabled:l,value:o,onChange:b,type:"password",size:"large",placeholder:"Введите пароль..."})]})]}),(0,Y.jsx)(Z.Z,{}),(0,Y.jsx)(w.ZP,{onClick:k,className:G.btn,size:"large",type:"primary",loading:l,children:"login"===a?"Войти":"Зарегистрироваться"})]})})]})}))}}]);